---
layout: post
title:  "The Future of Babel"
author: Henry Zhu
date:   2016-11-29 11:00:00
categories: announcements
share_text: "The Future of Babel"
---

How we're doing, where we want to go, and how you can help!

> Previous issues: [Babel Roadmap #4130](https://github.com/babel/babel/issues/4130), [6.0 #2168](https://github.com/babel/babel/issues/2168)

- Project Maintenance
- Current Status: Where We are Now
- Future: Where We Want to Go!

## Project Maintenance

Maintaining any large open source project could deserve its own article, but Babel itself covers a lot of ground: core packages, plugins, build integrations such as gulp, webpack, etc (many of which we ourselves may not use), and more. We want to be able to support community plugins, presets, and ideas.

Babel has its place in many tutorials, guides, talks, etc for various frameworks. The project itself has definitely helped me to understand the language better through bug fixes and support questions. We are active on Twitter, Slack, and GitHub across other projects that use Babel. We have to balance new features, bug fixes, browser support, speed of compilation/generated code, plugin options, ease of use, collaborating with individuals, big companies, libraries, and more.

We want to continue supporting the JavaScript toolchain: compilation, linting, minification, codemods, code coverage, etc.

## Current Status

### Maintaining Babel plugins [for each proposal in TC39](https://github.com/tc39/proposals) starting from stage 0

Babel uses [TC39's concept of stages](http://babeljs.io/docs/plugins/#stage-x-experimental-presets-) to categorize its experimental plugins.

In short, proposal champions benefit from getting feedback early and often. Babel is fundamental in the TC39 process given its place in the ecosystem. It's significantly easier for a developer to update a `.babelrc` file than a browser flag. It's also much faster to write a Babel plugin than implement the feature natively.

Users should be able to easily use features before they are actually implemented in browsers in [stage 4 of the proposal process](https://tc39.github.io/process-document/).

This is the core of Babel. It had its start as a JavaScript compiler for ES6 back when it was still called 6to5.

The proposals process often takes months and may involve significant iteration: some can change in syntax or even get dropped. Given TC39 meets every 2 months, the plugins should be updated as meetings happen so that users can be in sync and involved with the standards process.

There isn't enough time or resources to maintain each plugin, especially when there are spec updates.

Some transforms are simply out of date such as decorators. Logan had to port the previous spec [babel-plugin-transform-decorators-legacy](https://github.com/loganfsmyth/babel-plugin-transform-decorators-legacy) for Babel 6 and we haven't had anyone able to rewrite it for the updated spec.

Another example: [babel/babel#3473 - Async iteration proposal](https://github.com/babel/babel/pull/3473) wasn't merged for so long because we just didn't have time to review it. By the time it was merged it had already moved from stage 2 to stage 3.

### Maintaining other ecosystem plugins: JSX/Flow.

Babel is vital to the React and Flow ecosystems, and we work closely with their relevant teams at Facebook.

- [React plugins](https://babeljs.io/docs/plugins/#react)
- [Flow plugin](https://babeljs.io/docs/plugins/transform-flow-strip-types)

### Autoprefixer for Babel via [babel-preset-env](https://github.com/babel/babel-preset-env)

This is something that is very important as we move forward to a point where users are compiling a specific set of transforms while the browsers support a specific set of features. There is a constant sliding window. This preset picks the right amount of plugins supported by the target environments so that the code can be fast/smaller.

The goal of this effort is to make it simple to ship native code while allowing users to use the latest spec features. This will result in smaller payloads to users.

The next big feature would be dynamic checking of polyfills as well as syntax as described in [babel/babel-preset-env#20](https://github.com/babel/babel-preset-env/issues/20).

### Linting via [babel-eslint](https://github.com/babel/babel-eslint)

ESLint doesn't support new language features until they reach Stage 4 of the proposals process. For this reason we maintain [babel-eslint](https://github.com/babel/babel-eslint), a custom ESLint parser so you can continue to lint JavaScript with experimental syntax.

In the future, we'd like to lessen the maintenance burden of this project by improving our scope and traversal interop with ESLint.

It might even be interesting to be able to write ESLint rules using babel APIs or vice versa?

### Minification

[Babili](https://github.com/babel/babili) is our new Babel-powered minifier, enabling you to produce minified code while targeting the latest browsers.

It will be continually updated to take advantage of the latest JavaScript features (ES2015+ aware). Each transform can be independent and also pluggable.

### Codemods / Refactoring

Other relevant projects: [jscodeshift](https://github.com/facebook/jscodeshift), [recast](https://github.com/benjamn/recast), [Lebab](https://github.com/lebab/lebab).

By passing in [Recast](https://github.com/benjamn/recast) in the options, Babel can also be run on source code and can power the future of codemods. This feature was just made possible so we're looking forward to making it easier use and seeing the transformations it can enable.

Check out the [6.16.0 blog post](https://babeljs.io/blog/2016/09/28/6.16.0#new-feature) for more info!

### Code Coverage / Instrumentation

With tools like [nyc](https://github.com/istanbuljs/nyc) and [babel-plugin-instanbul](https://github.com/istanbuljs/babel-plugin-istanbul).

## Future

### [Plugin API Changes](https://github.com/babel/notes/blob/master/2016-08/august-01.md#potential-api-changes-for-traversal)

There is a lot of confusion around how plugins/presets interact regarding ordering. This results in bugs and issues with the config which require users to place plugins before/after others in a non-intuitive way.

This is a fundamental change to the core of Babel which will take some work to figure out.

### [Versioning]

TODO

### TypeScript Support

Be able to understand TypeScript syntax (like we do with Flow) and add a plugin to strip TypeScript types for better interop. This would just mean parsing TypeScript specific syntax and stripping it out. Anything more would require a lot more work and discussion.

### Use Type Information

Integrate with a type system such as Flow/TypeScript to make optimizations. This just means that Babel should be able to gain the knowledge through those tools that an identifier `arr` is actually an `Array` or not.

> There are a few plugins that actually do type checking: https://github.com/codemix/babel-plugin-typecheck and https://github.com/gcanti/babel-plugin-tcomb

### Take in a Dependency Graph / Operate Multifile

Then we could integrate with other tools like Webpack better. This would allow cross file transformations or whole codebase optimizations. The main reason for this would be for the minifier (being able to remove properties based on checking the usage across the whole application) or for example providing errors for missing/invalid import/exports.

### Parser Errors

Better error messages from the parser like in [Compiler Errors for Humans](http://elm-lang.org/blog/compiler-errors-for-humans).

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">babel-eslint@7.1.1: now adds the code frame when there&#39;s a parser error! <a href="https://t.co/yoxRpGXq5E">pic.twitter.com/yoxRpGXq5E</a></p>&mdash; Henry Zhu (@left_pad) <a href="https://twitter.com/left_pad/status/799388723896946692">November 17, 2016</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

> It is obvious that we all want to see helpful errors!

- [babel/babylon#125](https://github.com/babel/babylon/pull/125): Instead of "Unexpected token" explain that `await` needs to be used in an async function.
- Do better inference/guessing on user intention to prevent vague errors.

### `babel-init`

Basically a way to setup Babel easier like create-react-app does.

- Setup a `.babelrc` from scratch
- Maybe reuse the `babel` npm package to default to use babel-preset-env

### Run [tc39/test262](https://github.com/tc39/test262)

Running official spec tests against Babel to make sure we comply to the spec or at least know when we don't.

### Changing the Mindset Around Stage X Presets

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">My rule of thumb on how I decide what future features to transpile:<br>&quot;Could I reasonably codemod this if it changes?&quot;<br>Don&#39;t do it otherwise.</p>&mdash; Kent C. Dodds (@kentcdodds) <a href="https://twitter.com/kentcdodds/status/803815749416456196">November 30, 2016</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

Maybe we should rename or alias the stage x presets to explain more that they are "experimental", "dangerous", or likely to change?

### Smoke Tests

It would be useful to either have a reverse [Greenkeeper](https://greenkeeper.io) or to run tests with master branch of Babel so that we can catch any major regressions before any release (node has the [citgm project](https://github.com/nodejs/citgm) for this). In theory we would want to take the biggest open source projects that use Babel and run their tests.

[motiz88/babel-smoke-tests](https://github.com/motiz88/babel-smoke-tests) is a start!

### API Documentation

Docs should explain each feature and possible usages, improved links to books, articles, etc.

- All plugins should have examples. Can also embed [RunKit](https://runkit.com/home) or the REPL.
- Update Learn ES2015 to have ES2015+.
- Add resources page
- Update FAQ with common errors
- Page for community plugins
- babel-handbook, API docs, etc

### Program Analysis

- [Program Slicing](https://en.wikipedia.org/wiki/Program_slicing) with [slice-js](http://slides.com/kentcdodds/faster-javascript#/)
- Semantic (AST aware) Grepping tool

### `babel --debug`

This command would print out all info (also when erroring). It would also include performance metrics on how long each plugin takes.

### Syntax plugins:

#### Pluggable Parser

There's been a lot of talk about this. Acorn/Babylon do already support overriding parser methods (such as with JSX/Flow) but we're not sure we want to do this just yet. The current workaround is to fork the parser and pass that instead of Babylon to Babel.

#### Parser Unity

There have also been some discussions around parser/AST unity, in via [TheLarkInn/js-parser-discussions](https://github.com/TheLarkInn/js-parser-discussions) and previously with [estree](https://github.com/estree/estree).

Unfortunately with Babel 6, we have "forked" and have a few differences in [our AST](https://github.com/babel/babylon#output) than ESTree. Babel inherently will want to support stage x features while other parsers may only want to support stage 4 features. We all might prioritize certain things more than others regarding spec compliancy, performance, stage x features, error messages, extensibility, releases, etc. However it's important for us to be open to breaking changes that may lead to better interop and a better community.

#### Sweet.js Interop

Previous [issue](https://github.com/babel/babel/issues/568#issuecomment-71716260). Maybe we can just figure out how to have better interop instead.

#### Others?

Anything not already brought up here? Please send us a tweet [@babeljs](https://twitter.com/babeljs), a message on our slack (join at [http://slack.babeljs.io/](slack.babeljs.io), or create an RFC-like issue in our repo!

## How will it happen? Community

Old Issues:

- [Call for Contributors!](https://github.com/babel/babel/issues/1347)
- [Being Prepared for Getting Hit by a Bus](https://github.com/babel/babel/issues/1888)

You might think that as [a project gets more widely used](https://npm-stat.com/charts.html?package=babel-core) that more people show up to help out, but like most OSS projects that aren't backed by a company, there is a constant issue with maintenance and sustainability; people get burned out, move on to other cool projects, or get busy with work, life, family, etc.

> TODO
> // how to get involved, slack, mentoring, etc

### Documentation/Website

Docs contributions have definitely been lacking in the [last year](https://github.com/babel/babel.github.io/graphs/contributors?from=2015-11-29&to=2016-11-29&type=c).

However just recently we've done some awesome stuff:

- [@Daniel15](https://github.com/Daniel15) has been maintaining [babel-standalone](https://github.com/babel/babel-standalone) which we use in the REPL and has some automation when new releases get out.
- [@maxiloc](https://github.com/maxiloc) added search functionality via Algolia via [#977](https://github.com/babel/babel.github.io/pull/977)

and added some new collaborators: 

- [@STRML](https://github.com/STRML): Added discourse to all github pages via [#875](https://github.com/babel/babel.github.io/pull/875)
- [@xtuc](https://github.com/xtuc): Added support for reading the README from the babel repo so we don't have to sync 2 copies of docs via [#990](https://github.com/babel/babel.github.io/pull/990)
- [@fredericmarx](https://github.com/fredericmarx): Added support for a copy to clipboard button for code snippets via [#998](https://github.com/babel/babel.github.io/pull/998)
- [@seedofjoy](https://github.com/seedofjoy): Added a resize ability for the REPL via [#1003](https://github.com/babel/babel.github.io/pull/1003)

There's so much more [we can do though](https://github.com/babel/babel.github.io/issues)!

- [Reorganizing the docs layout](https://github.com/babel/babel.github.io/issues/930)
- [Adding a resources page](https://github.com/babel/babel.github.io/issues/27)
- [REPL: adding example dropdowns](https://github.com/babel/babel.github.io/issues/59)
- [REPL: supporting all options](https://github.com/babel/babel.github.io/issues/92)
- [Learn ES2015: teach others about ES2015+](https://github.com/babel/babel.github.io/issues/994)
- [Babili: render the docs for babel-minify](https://github.com/babel/babel.github.io/issues/999)
- [Showcase community plugins](https://github.com/babel/babel.github.io/issues/831)
- [REPL: allow the REPL to import any community plugin from npm](https://github.com/babel/babel.github.io/issues/858)
- [REPL: Use ASTexplorer](https://github.com/fkling/astexplorer/issues/70)

### Core Packages

> TODO
// add issues
